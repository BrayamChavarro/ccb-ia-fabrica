<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis Interactivo: Herramientas de IA para Negocios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The SPA has been enhanced with a more sophisticated, multi-input recommendation engine. The structure now includes: a hero section, tool selectors with new website links, a dynamic overview with a radar chart, use cases, a summary comparison table, a detailed recommendation engine, an in-depth comparison section, and a future/challenges section. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Key attributes of each tool. Goal: Compare tools multi-dimensionally. Viz: A dynamic radar chart. Interaction: Chart updates on tool selection. Justification: Provides a rich, multi-faceted visual comparison.
        - Report Info: User's specific business context (type, focus, industry, goals, problems). Goal: Provide a highly personalized tool recommendation and strategy. Method: An expanded multi-input form including textareas for user goals and problems. Interaction: User fills the form and clicks a button to trigger a scoring algorithm. A second button calls the Gemini API with this much richer context. Justification: This new level of detail makes the AI-generated strategy significantly more relevant and actionable.
        - Report Info: Added a "See More" modal for each tool. Goal: Provide quick, contextual information about each tool's function. Method: A "Ver más" button opens a modal window with detailed functionality info. Justification: Allows users to get a quick overview without selecting the tool and loading its full details below.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .active-tool {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-width: 2px;
        }
        .dark .active-tool {
             box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.25);
        }
        .active-tab, .deep-dive-tab.active {
            background-color: #4f46e5;
            color: #ffffff;
        }
        .tab-btn, .deep-dive-tab {
            transition: all 0.3s ease;
        }
        .content-section, .deep-dive-content {
            transition: opacity 0.5s ease-in-out;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">

    <main class="container mx-auto px-4 py-8 md:py-16">
        
        <header class="text-center mb-12 md:mb-16 relative">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-2">Potenciando Negocios con IA</h1>
            <p class="text-lg md:text-xl text-gray-600 dark:text-gray-400 max-w-4xl mx-auto">Un análisis interactivo de cuatro herramientas líderes de IA para transformar la productividad, ventas, marketing y atención al cliente.</p>
            <button id="theme-toggle" class="absolute top-0 right-0 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                <svg id="theme-icon-light" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                <svg id="theme-icon-dark" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
            </button>
        </header>

        <section id="tool-selector" class="mb-12">
             <div class="text-center mb-8">
                <p class="text-lg text-gray-700 dark:text-gray-300">Selecciona una herramienta para explorar sus características, casos de uso y potencial.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
                <div class="tool-card-container bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-2 border-indigo-600 transition-all duration-300 ease-in-out flex flex-col justify-between">
                    <div id="select-notionAI" class="flex-grow cursor-pointer">
                        <h2 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 mb-2">Notion AI</h2>
                        <p class="text-gray-600 dark:text-gray-400">Productividad y gestión del conocimiento.</p>
                    </div>
                    <div class="mt-4 flex items-center justify-between">
                        <button class="see-more-btn text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline" data-tool="notionAI">Ver más</button>
                        <a href="https://www.notion.so/product/ai" target="_blank" rel="noopener noreferrer" class="link-btn inline-flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:underline">Sitio Web <span class="ml-1">→</span></a>
                    </div>
                </div>
                <div class="tool-card-container bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-2 border-teal-600 transition-all duration-300 ease-in-out flex flex-col justify-between">
                    <div id="select-pipedriveAI" class="flex-grow cursor-pointer">
                        <h2 class="text-2xl font-bold text-teal-600 dark:text-teal-400 mb-2">Pipedrive AI</h2>
                        <p class="text-gray-600 dark:text-gray-400">Ventas y gestión de relaciones con clientes.</p>
                    </div>
                     <div class="mt-4 flex items-center justify-between">
                        <button class="see-more-btn text-sm font-medium text-teal-600 dark:text-teal-400 hover:underline" data-tool="pipedriveAI">Ver más</button>
                        <a href="https://www.pipedrive.com/en/ai" target="_blank" rel="noopener noreferrer" class="link-btn inline-flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:underline">Sitio Web <span class="ml-1">→</span></a>
                    </div>
                </div>
                <div class="tool-card-container bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-2 border-amber-500 transition-all duration-300 ease-in-out flex flex-col justify-between">
                    <div id="select-copyAI" class="flex-grow cursor-pointer">
                        <h2 class="text-2xl font-bold text-amber-500 dark:text-amber-400 mb-2">Copy.ai</h2>
                        <p class="text-gray-600 dark:text-gray-400">Generación de contenido y textos de marketing.</p>
                    </div>
                     <div class="mt-4 flex items-center justify-between">
                        <button class="see-more-btn text-sm font-medium text-amber-600 dark:text-amber-400 hover:underline" data-tool="copyAI">Ver más</button>
                        <a href="https://www.copy.ai/" target="_blank" rel="noopener noreferrer" class="link-btn inline-flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:underline">Sitio Web <span class="ml-1">→</span></a>
                    </div>
                </div>
                <div class="tool-card-container bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-2 border-sky-500 transition-all duration-300 ease-in-out flex flex-col justify-between">
                    <div id="select-crispAI" class="flex-grow cursor-pointer">
                        <h2 class="text-2xl font-bold text-sky-500 dark:text-sky-400 mb-2">Crisp AI</h2>
                        <p class="text-gray-600 dark:text-gray-400">Atención al cliente y automatización de soporte.</p>
                    </div>
                     <div class="mt-4 flex items-center justify-between">
                        <button class="see-more-btn text-sm font-medium text-sky-600 dark:text-sky-400 hover:underline" data-tool="crispAI">Ver más</button>
                        <a href="https://crisp.chat/" target="_blank" rel="noopener noreferrer" class="link-btn inline-flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:underline">Sitio Web <span class="ml-1">→</span></a>
                    </div>
                </div>
            </div>
        </section>

        <div id="dynamic-content-area" class="opacity-0 transition-opacity duration-500">
            
            <section id="overview" class="mb-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg">
                <h3 class="text-3xl font-bold text-center mb-2 text-gray-900 dark:text-white" id="overview-title"></h3>
                 <p id="overview-intro" class="text-center text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8"></p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">Propuesta de Valor Clave</h4>
                        <ul id="overview-value-list" class="space-y-3 text-gray-600 dark:text-gray-400">
                        </ul>
                    </div>
                     <div>
                        <h4 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300 text-center">Análisis de Dimensiones</h4>
                        <div class="chart-container">
                            <canvas id="impactChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="use-cases" class="mb-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg">
                 <h3 class="text-3xl font-bold text-center mb-2 text-gray-900 dark:text-white">Casos de Uso Aplicados</h3>
                 <p class="text-center text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8">Descubre cómo esta herramienta se aplica en diferentes áreas de negocio. Selecciona una categoría para ver ejemplos específicos y entender su impacto práctico en las operaciones diarias.</p>
                <div class="flex justify-center flex-wrap gap-2 md:gap-4 mb-8" id="use-case-tabs">
                </div>
                <div id="use-case-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </section>
            
            <section id="recommendation-engine" class="mb-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg">
                <h3 class="text-3xl font-bold text-center mb-2 text-gray-900 dark:text-white">Asesor de Estrategia IA</h3>
                <p class="text-center text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8">Define tu contexto de negocio para recibir una recomendación de herramientas y una estrategia de implementación a medida generada por IA.</p>
                
                <div class="max-w-4xl mx-auto space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="business-profile" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">1. Tipo de Empresa</label>
                            <select id="business-profile" class="w-full p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="startup">Startup</option>
                                <option value="pyme">PYME</option>
                                <option value="corporate">Corporativo</option>
                                <option value="freelancer">Freelancer</option>
                            </select>
                        </div>
                        <div>
                            <label for="focus-area" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">2. Área de Enfoque</label>
                            <select id="focus-area" class="w-full p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="ventas">Ventas</option>
                                <option value="marketing">Marketing y Contenido</option>
                                <option value="soporte">Soporte al Cliente</option>
                                <option value="operaciones">Operaciones y Productividad</option>
                            </select>
                        </div>
                        <div>
                            <label for="industry-type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">3. Industria</label>
                            <select id="industry-type" class="w-full p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="saas">SaaS / Tecnología</option>
                                <option value="ecommerce">E-commerce</option>
                                <option value="servicios">Servicios Profesionales</option>
                                <option value="contenidos">Medios / Contenido Digital</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="improvement-goal" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">4. ¿Qué te gustaría mejorar o conseguir?</label>
                        <textarea id="improvement-goal" rows="2" class="w-full p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="Ej: Aumentar la tasa de conversión, reducir el tiempo de respuesta, automatizar la creación de informes..."></textarea>
                    </div>
                    <div>
                        <label for="current-problem" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">5. ¿Cuál es tu problemática o desafío actual?</label>
                        <textarea id="current-problem" rows="2" class="w-full p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="Ej: Nuestro equipo de ventas pasa demasiado tiempo en tareas manuales, no tenemos un proceso claro para el onboarding..."></textarea>
                    </div>
                </div>
                <div class="text-center mt-8 mb-8">
                     <button id="get-recommendation-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300">Obtener Recomendación</button>
                </div>
                <div id="recommendation-result" class="bg-gray-100 dark:bg-gray-700/50 p-6 rounded-lg border border-gray-200 dark:border-gray-700 min-h-[10rem] transition-all duration-300 hidden">
                </div>
            </section>

            <section id="deep-dive-comparison" class="mb-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg">
                <h3 class="text-3xl font-bold text-center mb-2 text-gray-900 dark:text-white">Comparativa Profunda por Categorías</h3>
                <p class="text-center text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8">Para un análisis más detallado, selecciona una categoría. Esto te permitirá comparar las características específicas de cada herramienta lado a lado.</p>
                <div class="flex justify-center flex-wrap gap-2 md:gap-4 mb-8" id="deep-dive-tabs">
                </div>
                <div id="deep-dive-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                </div>
            </section>

            <section id="future" class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg">
                <h3 class="text-3xl font-bold text-center mb-2 text-gray-900 dark:text-white">Futuro y Desafíos</h3>
                 <p class="text-center text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8">El futuro de la IA en los negocios presenta tanto oportunidades emocionantes como desafíos importantes. Esta sección explora las tendencias emergentes y las consideraciones éticas y técnicas que definirán la próxima generación de estas herramientas.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-2xl font-semibold mb-4 text-gray-800 dark:text-gray-200">Tendencias Emergentes</h4>
                        <ul class="space-y-4">
                            <li class="flex items-start"><span class="text-indigo-500 dark:text-indigo-400 mr-3 mt-1">&#10140;</span><span><strong class="font-semibold">Agentes de IA Autónomos:</strong> Evolución hacia asistentes proactivos que sugieren y automatizan acciones complejas.</span></li>
                            <li class="flex items-start"><span class="text-indigo-500 dark:text-indigo-400 mr-3 mt-1">&#10140;</span><span><strong class="font-semibold">IA Explicable (XAI):</strong> Mayor transparencia en las fuentes de información y justificación de las decisiones algorítmicas.</span></li>
                             <li class="flex items-start"><span class="text-indigo-500 dark:text-indigo-400 mr-3 mt-1">&#10140;</span><span><strong class="font-semibold">Democratización Empresarial:</strong> Acceso a capacidades de IA avanzadas para empresas de todos los tamaños, reduciendo barreras técnicas.</span></li>
                        </ul>
                    </div>
                     <div>
                        <h4 class="text-2xl font-semibold mb-4 text-gray-800 dark:text-gray-200">Desafíos Éticos y Técnicos</h4>
                        <ul class="space-y-4">
                             <li class="flex items-start"><span class="text-red-500 dark:text-red-400 mr-3 mt-1">&#9888;</span><span><strong class="font-semibold">Privacidad y Protección de Datos:</strong> Preocupaciones sobre la confidencialidad de información propietaria y datos de clientes.</span></li>
                            <li class="flex items-start"><span class="text-red-500 dark:text-red-400 mr-3 mt-1">&#9888;</span><span><strong class="font-semibold">Sesgos Algorítmicos:</strong> Riesgo de perpetuar lenguaje no inclusivo o tomar decisiones sesgadas si no se supervisa adecuadamente.</span></li>
                            <li class="flex items-start"><span class="text-red-500 dark:text-red-400 mr-3 mt-1">&#9888;</span><span><strong class="font-semibold">Dependencia de la IA:</strong> Posible pérdida de habilidades críticas y riesgo de homogeneización en la comunicación corporativa.</span></li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <div id="info-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <header class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 id="info-modal-title" class="text-2xl font-bold text-gray-900 dark:text-white"></h3>
                <button id="close-info-modal-btn" class="text-gray-400 hover:text-gray-700 dark:hover:text-white text-3xl leading-none">&times;</button>
            </header>
            <div id="info-modal-content" class="p-8 overflow-y-auto text-gray-700 dark:text-gray-300">
            </div>
        </div>
    </div>
    
    <div id="strategy-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <header class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white">✨ Estrategia de Implementación Personalizada</h3>
                <button id="close-modal-btn-strategy" class="text-gray-400 hover:text-gray-700 dark:hover:text-white text-3xl leading-none">&times;</button>
            </header>
            <div id="strategy-modal-content" class="p-8 overflow-y-auto text-gray-700 dark:text-gray-300">
                <div class="flex flex-col items-center justify-center h-64">
                    <div class="loader"></div>
                    <p class="mt-4 text-gray-600 dark:text-gray-400">Generando estrategia con Gemini...</p>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="text-center py-8">
        <p class="text-gray-500 dark:text-gray-400">Aplicación interactiva generada para el análisis de herramientas de IA.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chartLabels = ['Facilidad de Uso', 'Eficiencia', 'Especialización', 'Personalización', 'Accesibilidad'];

            const aiData = {
                notionAI: { name: 'Notion AI', url: 'https://www.notion.so/product/ai', title: 'Notion AI: Potenciando la Productividad', description: 'Productividad y gestión del conocimiento.', iconColor: 'text-indigo-400', intro: 'Esta sección ofrece una visión general de Notion AI. El gráfico de radar muestra sus fortalezas en facilidad de uso y eficiencia, ideal para una herramienta de productividad general.', functionality: "Notion AI funciona como un asistente integrado que entiende el contexto de tus documentos. Puede generar texto desde cero, resumir reuniones largas en puntos clave, corregir gramática y estilo, e incluso ayudarte a superar el bloqueo creativo sugiriendo ideas. Su principal objetivo es hacer que la gestión del conocimiento y la creación de documentos sea más rápida e inteligente.", valueProps: ['Reduce hasta un 65% el tiempo dedicado a redacción y documentación.', 'Centraliza la gestión de conocimiento con capacidades de IA.', 'Mejora la consistencia y calidad de la documentación corporativa.'], chartData: { values: [5, 5, 3, 4, 4], bgColor: 'rgba(129, 140, 248, 0.2)', borderColor: 'rgba(129, 140, 248, 1)' }, useCases: { 'Operaciones': [{ title: 'Actas de Reuniones', desc: 'Generación automática de actas con puntos accionables.' }, { title: 'Creación de SOPs', desc: 'Transforma instrucciones básicas en Procedimientos Operativos Estándar formales.' }], 'RRHH': [{ title: 'Descripciones de Puesto', desc: 'Estandariza la creación de descripciones de puestos de trabajo.' }, { title: 'Planes de Onboarding', desc: 'Genera planes de incorporación personalizados.' }], 'Marketing': [{ title: 'Estrategias de Contenido', desc: 'Desarrolla ideas y borradores para estrategias multicanal.' }, { title: 'Copy para Campañas', desc: 'Crea textos persuasivos para materiales promocionales.' }] } },
                pipedriveAI: { name: 'Pipedrive AI', url: 'https://www.pipedrive.com/en/ai', title: 'Pipedrive AI: Optimizando las Ventas', description: 'Ventas y gestión de relaciones con clientes.', iconColor: 'text-teal-400', intro: 'Esta sección detalla Pipedrive AI. El gráfico de radar resalta su alta especialización en ventas y eficiencia, convirtiéndolo en una potente herramienta de CRM.', functionality: "Pipedrive AI analiza tus datos de ventas para identificar patrones y oportunidades. Te recomienda las próximas acciones a tomar con cada cliente, prioriza los leads con mayor probabilidad de conversión, y automatiza el seguimiento para que tu equipo de ventas se enfoque en cerrar tratos, no en tareas administrativas.", valueProps: ['Automatización de tareas administrativas repetitivas del ciclo de ventas.', 'Priorización inteligente de oportunidades de alto valor.', 'Mejora en la toma de decisiones gracias a análisis predictivos.'], chartData: { values: [4, 4, 5, 4, 3], bgColor: 'rgba(45, 212, 191, 0.2)', borderColor: 'rgba(45, 212, 191, 1)' }, useCases: { 'Ventas': [{ title: 'Asistente de Ventas', desc: 'Identifica patrones y recomienda las próximas acciones prioritarias.' }, { title: 'Priorización de Leads', desc: 'Clasifica leads según su potencial de conversión.' }], 'Comunicación': [{ title: 'Generador de Correos', desc: 'Crea correos electrónicos personalizados y efectivos.' }, { title: 'Resumen de Correos', desc: 'Condensa hilos de correo extensos para una comprensión rápida.' }], 'Análisis': [{ title: 'Informes Instantáneos', desc: 'Genera informes de ventas detallados usando lenguaje natural.' }, { title: 'Visualización de Tendencias', desc: 'Optimiza el embudo de ventas al identificar patrones.' }] } },
                copyAI: { name: 'Copy.ai', url: 'https://www.copy.ai/', title: 'Copy.ai: Acelerando la Creatividad', description: 'Generación de contenido y textos de marketing.', iconColor: 'text-amber-400', intro: 'Esta sección explora Copy.ai. El gráfico de radar subraya su máxima eficiencia y especialización en la generación de contenido, ideal para equipos de marketing.', functionality: "Copy.ai es una plataforma especializada en generar texto persuasivo y creativo. Es ideal para equipos de marketing que necesitan crear rápidamente anuncios, publicaciones para redes sociales, descripciones de productos, y correos electrónicos. Su motor de IA está entrenado para producir contenido que capte la atención y motive a la acción.", valueProps: ['Acelera la creación de textos de calidad para marketing y ventas.', 'Genera múltiples versiones de un mensaje para pruebas A/B.', 'Supera el bloqueo del escritor con sugerencias creativas instantáneas.'], chartData: { values: [5, 5, 5, 4, 2], bgColor: 'rgba(251, 191, 36, 0.2)', borderColor: 'rgba(251, 191, 36, 1)' }, useCases: { 'Marketing': [{ title: 'Anuncios Publicitarios', desc: 'Genera copys para Google Ads, Facebook Ads y otras plataformas.' }, { title: 'Contenido Web', desc: 'Crea textos para páginas de destino, blogs y descripciones de productos.' }], 'Comunicaciones': [{ title: 'Emails', desc: 'Automatiza la redacción de correos de marketing y seguimiento de ventas.' }, { title: 'Redes Sociales', desc: 'Genera ideas y textos para posts en LinkedIn, Twitter, etc.' }], 'Ventas': [{ title: 'Guiones de Venta', desc: 'Desarrolla guiones y puntos clave para llamadas de venta.' }, { title: 'Respuestas a Clientes', desc: 'Redacta respuestas rápidas y consistentes.' }] } },
                crispAI: { name: 'Crisp AI', url: 'https://crisp.chat/', title: 'Crisp AI: Revolucionando el Soporte', description: 'Atención al cliente y automatización de soporte.', iconColor: 'text-sky-400', intro: 'Aquí analizamos Crisp. El gráfico de radar muestra un perfil equilibrado, destacando su especialización en soporte y su alta accesibilidad.', functionality: "Crisp AI se enfoca en mejorar la comunicación y el soporte al cliente. Su chatbot puede responder preguntas frecuentes 24/7, calificar leads y dirigir conversaciones complejas a los agentes humanos adecuados. Se integra en múltiples canales (web, email, redes sociales) para ofrecer una experiencia unificada y reducir la carga de trabajo del equipo de soporte.", valueProps: ['Mejora la experiencia del cliente con respuestas instantáneas 24/7.', 'Reduce la carga operativa del equipo de soporte hasta en un 50%.', 'Centraliza la comunicación multicanal (chat, email, redes sociales).'], chartData: { values: [4, 4, 5, 3, 4], bgColor: 'rgba(56, 189, 248, 0.2)', borderColor: 'rgba(56, 189, 248, 1)' }, useCases: { 'Soporte': [{ title: 'Automatización de Respuestas', desc: 'Configura un chatbot para responder preguntas frecuentes al instante.' }, { title: 'Gestión de FAQ con IA', desc: 'El bot aprende de las conversaciones para mejorar sus respuestas.' }], 'Ventas': [{ title: 'Calificación de Leads', desc: 'El chatbot puede recopilar información inicial y calificar a los visitantes.' }, { title: 'Coordinación de Equipo', desc: 'Transfiere conversaciones complejas al agente humano adecuado.' }], 'Cliente': [{ title: 'Soporte Proactivo', desc: 'Inicia conversaciones con visitantes basado en su comportamiento.' }, { title: 'Disponibilidad 24/7', desc: 'Ofrece soporte básico fuera del horario de oficina.' }] } }
            };

            const deepDiveData = {
                'Plan Gratuito': { notionAI: ['Prueba de Notion AI en cualquier plan gratuito.'], pipedriveAI: ['No incluye funciones de IA explícitas en el plan gratuito.'], copyAI: ['2,000 palabras en chat', 'Acceso a ChatGPT 3.5 y Claude 3', 'Copy.ai Brand Voice & Infobase'], crispAI: ['2 asientos de agente', 'Chat widget y shared inbox', 'Sin chatbot de IA'] },
                'Capacidades de IA': { notionAI: ['Generación y resumen de texto', 'Traducción', 'Corrección de estilo', 'Lluvia de ideas'], pipedriveAI: ['Asistente de ventas IA (Plan Pro+)', 'Sugerencias de acciones', 'Pronóstico de ingresos', 'Lead routing inteligente'], copyAI: ['Generación de copy para marketing', 'Creación de flujos de trabajo de ventas y marketing', 'Acceso a últimos modelos LLM (Plan Starter+)'], crispAI: ['Chatbot Omnicanal IA (Plan Essentials+)', 'Entrenamiento con datos internos', 'Resumen de conversaciones (Plan Plus+)', 'Asistente de bandeja de entrada (Plan Plus+)'] },
                'Integraciones': { notionAI: ['Slack, Jira, GitHub, Figma, etc.', 'API para integraciones personalizadas (en planes Business+)'], pipedriveAI: ['Más de 400 integraciones en su Marketplace', 'Zapier, Slack, Google Workspace, Microsoft 365'], copyAI: ['No ofrece integraciones directas, funciona como una herramienta independiente.', 'API disponible para desarrolladores.'], crispAI: ['Salesforce, Hubspot (Plan Plus+)', 'Slack, Zapier, WhatsApp', 'API completa para integraciones a medida.'] }
            };
            
            let currentToolKey = null;
            let impactChart = null;
            
            const toolCards = { notionAI: document.getElementById('select-notionAI'), pipedriveAI: document.getElementById('select-pipedriveAI'), copyAI: document.getElementById('select-copyAI'), crispAI: document.getElementById('select-crispAI') };
            const dynamicContentArea = document.getElementById('dynamic-content-area');
            const overviewTitle = document.getElementById('overview-title');
            const overviewIntro = document.getElementById('overview-intro');
            const valueList = document.getElementById('overview-value-list');
            const useCaseTabsContainer = document.getElementById('use-case-tabs');
            const useCaseContentContainer = document.getElementById('use-case-content');
            
            const businessProfileSelector = document.getElementById('business-profile');
            const focusAreaSelector = document.getElementById('focus-area');
            const industryTypeSelector = document.getElementById('industry-type');
            const improvementGoalInput = document.getElementById('improvement-goal');
            const currentProblemInput = document.getElementById('current-problem');
            const getRecommendationBtn = document.getElementById('get-recommendation-btn');
            const recommendationResultContainer = document.getElementById('recommendation-result');

            const deepDiveTabsContainer = document.getElementById('deep-dive-tabs');
            const deepDiveContentContainer = document.getElementById('deep-dive-content');

            const infoModal = document.getElementById('info-modal');
            const closeInfoModalBtn = document.getElementById('close-info-modal-btn');
            const infoModalTitle = document.getElementById('info-modal-title');
            const infoModalContent = document.getElementById('info-modal-content');

            const strategyModal = document.getElementById('strategy-modal');
            const closeModalBtnStrategy = document.getElementById('close-modal-btn-strategy');
            const strategyModalContent = document.getElementById('strategy-modal-content');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const lightIcon = document.getElementById('theme-icon-light');
            const darkIcon = document.getElementById('theme-icon-dark');

            function initChart() {
                const isDark = document.documentElement.classList.contains('dark');
                const labelColor = isDark ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)';
                const angleLineColor = isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)';

                const ctx = document.getElementById('impactChart').getContext('2d');
                impactChart = new Chart(ctx, {
                    type: 'radar', data: { labels: chartLabels, datasets: [{ label: '', data: [], backgroundColor: [], borderColor: [], borderWidth: 2, pointBackgroundColor: [], pointBorderColor: '#fff', pointHoverBackgroundColor: '#fff', pointHoverBorderColor: [] }] },
                    options: { responsive: true, maintainAspectRatio: false, scales: { r: { beginAtZero: true, max: 5, ticks: { stepSize: 1, display: false }, pointLabels: { color: labelColor, font: { size: 12 } }, angleLines: { color: angleLineColor } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { return `${context.chart.data.labels[context.dataIndex]}: ${context.raw}`; } } } } }
                });
            }

            function updateChartTheme() {
                if (!impactChart) return;
                const isDark = document.documentElement.classList.contains('dark');
                const labelColor = isDark ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)';
                const angleLineColor = isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)';
                impactChart.options.scales.r.pointLabels.color = labelColor;
                impactChart.options.scales.r.angleLines.color = angleLineColor;
                impactChart.update();
            }

            function updateUI(toolKey) {
                if (!aiData[toolKey] || currentToolKey === toolKey) return;
                currentToolKey = toolKey;
                const currentToolData = aiData[toolKey];
                dynamicContentArea.style.opacity = '0';
                
                setTimeout(() => {
                    overviewTitle.textContent = currentToolData.title;
                    overviewIntro.textContent = currentToolData.intro;
                    
                    valueList.innerHTML = '';
                    currentToolData.valueProps.forEach(prop => {
                        const li = document.createElement('li');
                        li.className = 'flex items-start';
                        li.innerHTML = `<span class="text-green-500 dark:text-green-400 mr-3 mt-1">&#10003;</span><span>${prop}</span>`;
                        valueList.appendChild(li);
                    });

                    const chartDataset = impactChart.data.datasets[0];
                    chartDataset.label = currentToolData.name;
                    chartDataset.data = currentToolData.chartData.values;
                    chartDataset.backgroundColor = currentToolData.chartData.bgColor;
                    chartDataset.borderColor = currentToolData.chartData.borderColor;
                    chartDataset.pointBackgroundColor = currentToolData.chartData.borderColor;
                    chartDataset.pointHoverBorderColor = currentToolData.chartData.borderColor;
                    impactChart.update();

                    useCaseTabsContainer.innerHTML = '';
                    const categories = Object.keys(currentToolData.useCases);
                    categories.forEach((category, index) => {
                        const button = document.createElement('button');
                        button.textContent = category;
                        button.className = 'tab-btn px-4 py-2 rounded-lg font-semibold text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600';
                        button.dataset.category = category;
                        if (index === 0) { button.classList.add('active-tab'); }
                        button.onclick = () => showUseCases(category);
                        useCaseTabsContainer.appendChild(button);
                    });
                    
                    showUseCases(categories[0]);
                    dynamicContentArea.style.opacity = '1';
                    Object.values(toolCards).forEach(card => card.parentElement.classList.remove('active-tool'));
                    toolCards[toolKey].parentElement.classList.add('active-tool');
                }, 300);
            }

            function showUseCases(category) {
                const useCases = aiData[currentToolKey].useCases[category];
                useCaseContentContainer.innerHTML = '';
                if (!useCases) return;
                useCases.forEach(uc => {
                    const card = document.createElement('div');
                    card.className = 'bg-gray-100 dark:bg-gray-700/50 p-6 rounded-lg border border-gray-200 dark:border-gray-700';
                    card.innerHTML = `<h5 class="font-bold text-lg mb-2 text-gray-800 dark:text-gray-200">${uc.title}</h5><p class="text-gray-600 dark:text-gray-400">${uc.desc}</p>`;
                    useCaseContentContainer.appendChild(card);
                });
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.toggle('active-tab', btn.dataset.category === category);
                });
            }

            async function generateStrategy(recommendedTools, improvementGoal, currentProblem) {
                strategyModal.classList.remove('hidden');
                strategyModalContent.innerHTML = `<div class="flex flex-col items-center justify-center h-64"><div class="loader"></div><p class="mt-4 text-gray-600 dark:text-gray-400">Generando estrategia con Gemini...</p></div>`;

                const profile = businessProfileSelector.options[businessProfileSelector.selectedIndex].text;
                const focus = focusAreaSelector.options[focusAreaSelector.selectedIndex].text;
                const industry = industryTypeSelector.options[industryTypeSelector.selectedIndex].text;
                const toolNames = recommendedTools.map(t => aiData[t].name).join(' y ');

                const prompt = `Como consultor experto en estrategia digital, crea un plan de implementación detallado y paso a paso para un(a) "${profile}" en la industria de "${industry}" con un enfoque principal en mejorar el área de "${focus}".
                
                Contexto Adicional del Usuario:
                - Objetivo a Mejorar: "${improvementGoal}"
                - Problemática Actual: "${currentProblem}"

                Las herramientas de IA recomendadas para abordar esto son: ${toolNames}.

                El plan debe ser claro, accionable y estar formateado en HTML simple (usando <ul>, <li>, <h3>, <strong>, <p>). Debe incluir:
                <h3>1. Fases Clave del Proyecto</h3> (Detallando pasos iniciales, intermedios y de optimización).
                <h3>2. KPIs Esenciales para Medir el Éxito</h3> (Métricas específicas para el objetivo y problemática del usuario).
                <h3>3. Posibles Desafíos y Soluciones</h3> (Anticipando obstáculos basados en el contexto).`;

                const payload = { contents: [{ parts: [{ text: prompt }] }] };
                const apiKey = "AIzaSyCGpsah9RYkMF5ca00fkeqoYOb89mN1NJs";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) { throw new Error(`API request failed with status ${response.status}`); }
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0] && result.candidates[0].content.parts[0].text) {
                        strategyModalContent.innerHTML = result.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                    } else {
                        strategyModalContent.innerHTML = `<p class="text-red-500">No se pudo generar una estrategia en este momento. Por favor, inténtalo de nuevo.</p>`;
                    }
                } catch (error) {
                    console.error("Error fetching strategy:", error);
                    strategyModalContent.innerHTML = `<p class="text-red-500">Ocurrió un error al contactar el servicio de IA. Revisa la consola para más detalles.</p>`;
                }
            }
            
            function updateRecommendation() {
                const profile = businessProfileSelector.value;
                const focus = focusAreaSelector.value;
                const industry = industryTypeSelector.value;
                const improvementGoal = improvementGoalInput.value;
                const currentProblem = currentProblemInput.value;

                const scores = { notionAI: 0, pipedriveAI: 0, copyAI: 0, crispAI: 0 };
                
                if (focus === 'operaciones') scores.notionAI += 3;
                if (focus === 'ventas') scores.pipedriveAI += 3;
                if (focus === 'marketing') scores.copyAI += 3;
                if (focus === 'soporte') scores.crispAI += 3;
                if (industry === 'ecommerce') { scores.copyAI += 2; scores.crispAI += 2; }
                if (industry === 'saas') { scores.pipedriveAI += 2; scores.crispAI += 2; }
                if (industry === 'servicios') { scores.notionAI += 2; scores.pipedriveAI += 2; }
                if (industry === 'contenidos') { scores.copyAI += 3; scores.notionAI += 2; }
                if (profile === 'startup') { scores.crispAI += 2; scores.notionAI += 1; }
                if (profile === 'pyme') { scores.pipedriveAI += 2; scores.copyAI += 1; }
                if (profile === 'corporate') { scores.pipedriveAI += 1; scores.notionAI += 1; }
                if (profile === 'freelancer') { scores.copyAI += 2; scores.notionAI += 2; }
                
                const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
                const topScore = sortedScores[0][1];
                const recommendedTools = sortedScores.filter(item => item[1] === topScore).map(item => item[0]);

                let justification = `Para un(a) <strong>${businessProfileSelector.options[businessProfileSelector.selectedIndex].text}</strong> en la industria de <strong>${industryTypeSelector.options[industryTypeSelector.selectedIndex].text}</strong>, con un enfoque en <strong>${focusAreaSelector.options[focusAreaSelector.selectedIndex].text}</strong>, las herramientas más efectivas son:`;
                
                recommendationResultContainer.classList.remove('hidden');

                let toolsHTML = '<div class="flex flex-wrap justify-center gap-4 my-4">';
                recommendedTools.forEach(toolKey => {
                    const toolData = aiData[toolKey];
                    toolsHTML += `<div class="flex items-center bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"><span class="text-2xl mr-3 ${toolData.iconColor}">&#9679;</span><div><p class="font-bold text-gray-800 dark:text-gray-200">${toolData.name}</p><p class="text-sm text-gray-500 dark:text-gray-400">${toolData.description}</p></div></div>`;
                });
                toolsHTML += '</div>';

                const strategyButtonHTML = `<div class="mt-6 text-center"><button id="generate-strategy-btn" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300">✨ Generar Estrategia de Implementación</button></div>`;

                recommendationResultContainer.innerHTML = `<p class="text-center text-gray-600 dark:text-gray-400">${justification}</p>${toolsHTML}${strategyButtonHTML}`;
                
                document.getElementById('generate-strategy-btn').addEventListener('click', () => generateStrategy(recommendedTools, improvementGoal, currentProblem));
            }

            function showDeepDiveContent(category) {
                deepDiveContentContainer.innerHTML = '';
                Object.keys(aiData).forEach(toolKey => {
                    const toolData = aiData[toolKey];
                    const categoryData = deepDiveData[category][toolKey];
                    const card = document.createElement('div');
                    card.className = 'bg-gray-100 dark:bg-gray-800/50 p-6 rounded-lg border-t-4';
                    
                    const borderColorClass = toolData.chartData.borderColor.replace('rgba', 'rgb').replace(/, 1\)$/, ')');
                    card.style.borderTopColor = borderColorClass;

                    let listItems = '';
                    categoryData.forEach(item => {
                        listItems += `<li class="flex items-start"><span class="mr-2 mt-1 text-gray-400 dark:text-gray-500">&#8227;</span><span class="text-gray-700 dark:text-gray-300">${item}</span></li>`;
                    });

                    card.innerHTML = `
                        <h4 class="font-bold text-lg mb-3 ${toolData.iconColor}">${toolData.name}</h4>
                        <ul class="space-y-2 text-sm">${listItems}</ul>
                    `;
                    deepDiveContentContainer.appendChild(card);
                });

                document.querySelectorAll('.deep-dive-tab').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.category === category);
                });
            }
            
            function showInfoModal(toolKey) {
                const toolData = aiData[toolKey];
                if (!toolData) return;
                
                infoModalTitle.textContent = toolData.title;
                infoModalContent.textContent = toolData.functionality;
                infoModal.classList.remove('hidden');
            }

            function initDeepDive() {
                const categories = Object.keys(deepDiveData);
                categories.forEach((category, index) => {
                    const button = document.createElement('button');
                    button.textContent = category;
                    button.className = 'deep-dive-tab px-4 py-2 rounded-lg font-semibold text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600';
                    button.dataset.category = category;
                    if (index === 0) { button.classList.add('active'); }
                    button.onclick = () => showDeepDiveContent(category);
                    deepDiveTabsContainer.appendChild(button);
                });
                showDeepDiveContent(categories[0]);
            }

            function handleThemeToggle() {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                lightIcon.classList.toggle('hidden', isDark);
                darkIcon.classList.toggle('hidden', !isDark);
                updateChartTheme();
            }
            
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                lightIcon.classList.add('hidden');
                darkIcon.classList.remove('hidden');
            } else {
                lightIcon.classList.remove('hidden');
                darkIcon.classList.add('hidden');
            }

            themeToggleBtn.addEventListener('click', handleThemeToggle);
            getRecommendationBtn.addEventListener('click', updateRecommendation);
            closeInfoModalBtn.addEventListener('click', () => infoModal.classList.add('hidden'));
            closeModalBtnStrategy.addEventListener('click', () => strategyModal.classList.add('hidden'));

            Object.keys(toolCards).forEach(key => {
                toolCards[key].addEventListener('click', () => updateUI(key));
            });
            
            document.querySelectorAll('.see-more-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showInfoModal(e.target.dataset.tool);
                });
            });

            document.querySelectorAll('.link-btn').forEach(btn => {
                btn.addEventListener('click', e => e.stopPropagation());
            });

            initChart();
            initDeepDive();
            updateUI('notionAI');
        });
    </script>
</body>
</html>
